=====================================
ğŸ“ SYSTEM ARCHITECTURE
=====================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CLIENT SIDE                        â”‚
â”‚  (Web Browser / Mobile Browser)              â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚      HTML/CSS/JavaScript           â”‚     â”‚
â”‚  â”‚                                    â”‚     â”‚
â”‚  â”‚  - Responsive UI                   â”‚     â”‚
â”‚  â”‚  - Canvas Chart Rendering          â”‚     â”‚
â”‚  â”‚  - AJAX API Calls                  â”‚     â”‚
â”‚  â”‚  - Real-time Data Display          â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                    â”‚                         â”‚
â”‚                    â”‚ HTTP/REST               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           SERVER SIDE                        â”‚
â”‚              (FastAPI)                       â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         main.py                    â”‚     â”‚
â”‚  â”‚                                    â”‚     â”‚
â”‚  â”‚  REST API Endpoints:               â”‚     â”‚
â”‚  â”‚  - POST /api/connect               â”‚     â”‚
â”‚  â”‚  - GET  /api/disconnect            â”‚     â”‚
â”‚  â”‚  - GET  /api/status                â”‚     â”‚
â”‚  â”‚  - GET  /api/symbols               â”‚     â”‚
â”‚  â”‚  - POST /api/chart                 â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â”‚                â”‚                 â”‚
â”‚           â”‚                â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ mt5_connector.pyâ”‚  â”‚ pnf_calculator.pyâ”‚  â”‚
â”‚  â”‚                 â”‚  â”‚                  â”‚   â”‚
â”‚  â”‚ - Connection    â”‚  â”‚ - Box Calc       â”‚   â”‚
â”‚  â”‚ - Get Rates     â”‚  â”‚ - Reversal Logic â”‚   â”‚
â”‚  â”‚ - Get Symbols   â”‚  â”‚ - Chart Data     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ MetaTrader5 API
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        MetaTrader 5 Terminal                 â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚     MT5 Platform                   â”‚     â”‚
â”‚  â”‚                                    â”‚     â”‚
â”‚  â”‚  - Price Data                      â”‚     â”‚
â”‚  â”‚  - Account Info                    â”‚     â”‚
â”‚  â”‚  - Symbol Information              â”‚     â”‚
â”‚  â”‚  - Historical Rates                â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                    â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Broker Server â”‚
            â”‚   (Live Data)  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


=====================================
ğŸ“Š DATA FLOW
=====================================

1. User Request Flow:
   User â†’ Browser â†’ FastAPI â†’ MT5 Connector â†’ MT5 Terminal â†’ Broker

2. Chart Generation Flow:
   
   a) User clicks "à¹‚à¸«à¸¥à¸”à¸à¸£à¸²à¸Ÿ"
      â†“
   b) Browser sends POST /api/chart with:
      - symbol
      - timeframe  
      - bars
      - box_size
      - reversal_amount
      â†“
   c) FastAPI receives request
      â†“
   d) MT5 Connector fetches historical data
      â†“
   e) PnF Calculator processes data:
      - Convert prices to boxes
      - Detect reversals
      - Build columns (X and O)
      â†“
   f) Return JSON data to browser
      â†“
   g) JavaScript draws chart on Canvas


=====================================
ğŸ—‚ï¸ FILE STRUCTURE
=====================================

pnf_mt5_project/
â”‚
â”œâ”€â”€ main.py                   # FastAPI application
â”‚   â”œâ”€â”€ Routes (API endpoints)
â”‚   â”œâ”€â”€ CORS middleware
â”‚   â””â”€â”€ Startup/Shutdown events
â”‚
â”œâ”€â”€ mt5_connector.py          # MT5 Integration
â”‚   â”œâ”€â”€ connect()            # Connect to MT5
â”‚   â”œâ”€â”€ disconnect()         # Disconnect
â”‚   â”œâ”€â”€ get_rates()          # Fetch price data
â”‚   â”œâ”€â”€ get_symbols()        # Get symbol list
â”‚   â””â”€â”€ get_symbol_info()    # Symbol details
â”‚
â”œâ”€â”€ pnf_calculator.py         # Point and Figure Logic
â”‚   â”œâ”€â”€ calculate()          # Main calculation
â”‚   â”œâ”€â”€ _price_to_box()      # Price conversion
â”‚   â”œâ”€â”€ _box_to_price()      # Box conversion
â”‚   â””â”€â”€ _format_chart_data() # Format output
â”‚
â”œâ”€â”€ config.json               # Configuration
â”‚   â”œâ”€â”€ mt5 settings
â”‚   â”œâ”€â”€ pnf settings
â”‚   â””â”€â”€ api settings
â”‚
â”œâ”€â”€ requirements.txt          # Python dependencies
â”‚
â”œâ”€â”€ static/
â”‚   â””â”€â”€ index.html           # Frontend UI
â”‚       â”œâ”€â”€ HTML structure
â”‚       â”œâ”€â”€ CSS styling
â”‚       â””â”€â”€ JavaScript logic
â”‚
â”œâ”€â”€ run.bat                  # Windows launcher
â”œâ”€â”€ run.sh                   # Linux/Mac launcher
â””â”€â”€ README.md                # Documentation


=====================================
ğŸ”„ COMPONENT INTERACTION
=====================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1. POST /api/connect
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FastAPI    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 2. mt5_connector.connect()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MT5Connector â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 3. mt5.initialize()
       â”‚    mt5.login()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MT5 Terminal â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Then for chart:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1. POST /api/chart
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FastAPI    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 2. mt5_connector.get_rates()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MT5Connector â”‚ â”€â”€â†’ Returns DataFrame
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. Pass DataFrame
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚PnFCalculator â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 4. calculate()
       â”‚    - Build columns
       â”‚    - Detect reversals
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JSON Data   â”‚ â”€â”€â†’ Back to Browser
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 5. JavaScript draws on Canvas
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chart Visual â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


=====================================
ğŸ¯ KEY FEATURES
=====================================

âœ“ RESTful API Design
âœ“ Separation of Concerns
âœ“ Modular Architecture
âœ“ Responsive Frontend
âœ“ Real-time Data Processing
âœ“ Error Handling
âœ“ Configuration Management
âœ“ Cross-platform Support


=====================================
ğŸ” SECURITY CONSIDERATIONS
=====================================

1. API Level:
   - CORS enabled (configure for production)
   - No API key by default (add for production)
   - Rate limiting not implemented (add if needed)

2. Data Level:
   - Passwords not exposed in API responses
   - Config file should not be committed to Git
   - Use environment variables for production

3. Network Level:
   - Run on localhost by default
   - Configure firewall for external access
   - Use HTTPS in production


=====================================
ğŸš€ SCALABILITY OPTIONS
=====================================

Future Enhancements:

1. Caching:
   - Redis for chart data
   - Reduce MT5 API calls

2. WebSocket:
   - Real-time updates
   - Live price streaming

3. Database:
   - Store historical charts
   - User preferences
   - Trading history

4. Microservices:
   - Separate MT5 connector
   - Independent scaling
   - Load balancing

5. Authentication:
   - JWT tokens
   - User management
   - Session handling


=====================================
